<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:bop2="http://www.fanuc.co.jp/develop/mmc/bop2">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>cnc_rdexecpt</title>
      <link rel="stylesheet" type="text/css" href="../fwlib32.css">
   </head>
   <body bgcolor="#FFFFFF"><FONT face="Verdana,Arial,Helvetica,sans-serif"><a name="Function Name"></a><p class="ftitle">cnc_rdexecpt</p>
         <div class="text"><a name="Declaration"></a><p class="label">Declaration</p>
            <div class="mth">#include "fwlib32.h" or "fwlib64.h"
               <p></p>
               <prottype>FWLIBAPI short WINAPI cnc_rdexecpt(unsigned short FlibHndl, PRGPNT *pact, PRGPNT *pnext);</prottype>
            </div><a name="Description"></a><p class="label">Description</p>
            <cmn>
               When the CNC is MDI and MEM mode(In case of CNC is running), the program number and
               block number of the executed program is acquired.
               When the CNC is EDIT, TJOG and THND mode(In case of CNC is editing), the program number
               and block number of the preread data is acquired.
               <p></p>
               
               <!--        In case of the following, EW_REJECT error occurs.<p/> -->
               <span class="xis">
                  The limitation of this function is as follows.
                  <p></p>
                  
                  <dd>1) CNC is in DNC/M198 operation. </dd>
                  
                  <dd>2) CNC is in RISC operation. </dd>
                  <!--            <dd>3) OP signal is OFF in MDi, MEM mode.</dd> -->
                  
                  <dd>3) The program number which is acquired by cnc_rdprgnum and  this function  is not
                     same number.</dd>
                  
                  <dd>4) In case of FS30i-A, when STL signal is ON, the return code is EW_REJECT.</dd>
                  
                  <dd>5) In case of FS0i-D/F, FS30i-B and PMi-A, even if STL signal is ON, the return code
                     is EW_OK. (when Parameter No.13104#1=1, the return code is EW_REJECT)</dd>
                  
                  <dd>6) In case of FS0i-D/F, FS30i-B and PMi-A, even if M198 is executed, the return code
                     is EW_OK.</dd>
                  
                  <dd>7) In case of FS30i, FS0i-D/F and PMi-A, the contents of "pact" and "pnext" is same.
                     (the preread block cannot be acquired.)</dd>
                  
                  <dd>8) The pointer information acquired with FS16i/18i/21i and FS30i, FS0i-D/F, PMi-A
                     might be different depending on the running mode(or status).</dd>
                  </span>
               <span class="ois">
                  The limitation of this function is as follows.
                  <p></p>
                  
                  <dd>1) CNC is in DNC/M198 operation. </dd>
                  
                  <dd>2) CNC is in RISC operation. </dd>
                  
                  <dd>3) The program number which is acquired by cnc_rdprgnum and  this function  is not
                     same number.</dd>
                  
                  <dd>4) In case of FS30i-A, when STL signal is ON, the return code is EW_REJECT.</dd>
                  
                  <dd>5) In case of FS30i-B, even if STL signal is ON, the return code is EW_OK. (when Parameter
                     No.13104#1=1, the return code is EW_REJECT)</dd>
                  
                  <dd>6) In case of FS30i-B, even if M198 is executed, the return code is EW_OK.</dd>
                  
                  <dd>7) The contents of "pact" and "pnext" is same. (the preread block cannot be acquired.)</dd>
                  
                  <dd>8) The pointer information acquired might be different depending on the running mode(or
                     status).</dd>
                  </span>
               </cmn><a name="Arguments"></a><p class="label">Arguments : HSSB</p>
            <div class="dtarg">
               <name>FlibHndl</name>
               &nbsp;&nbsp;[&nbsp;
               <type>in</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  
                  <p>
                     Specify the library handle. See "<a href="handle.htm" target="_parent">Library handle</a>" for details.
                     </p>
                  </content>
            </div>
            <div class="dtarg">
               <name>pact</name>
               &nbsp;&nbsp;[&nbsp;
               <type>out</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  
                  <p>
                     Specify the pointer to the PRGPNT structure to store the execution pointer.
                     </p>
                  The PRGPNT structure is as follows.
                  
                  <pre>
typedef struct _prgpnt {
    long    prog_no;
    long    blk_no;
} PRGPNT;
</pre>
                  
                  <dt>prog_no</dt>
                  
                  <dd>Program number</dd>
                  
                  <dd>When the MDI program is executed, -1 is set.</dd><br>
                  
                  
                  <dt>blk_no</dt>
                  
                  <dd>Block number</dd>
                  
                  <dd>The block number by which the head of program is 0 is set.</dd>
                  
                  </content>
            </div>
            <div class="dtarg">
               <name>pnext</name>
               &nbsp;&nbsp;[&nbsp;
               <type>out</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  Specify the pointer to PRGPNT structure to store the preread block pointer.  The PRGPNT
                  structure is as shown in the above.
                  </content>
            </div><a name="Return"></a><p class="label">Return</p>
            <p>EW_OK is returned on successful completion, otherwise any value except EW_OK is returned.</p>
            <p>The major error codes are as follows.</p>
            <table border="1">
               <colgroup align="center" valign="top"></colgroup>
               <colgroup align="left" valign="top"></colgroup>
               <colgroup align="left" valign="top"></colgroup>
               <tr>
                  <th>Return code</th>
                  <th>Meaning/Error handling</th>
               </tr>
               <tr>
                  <td>
                     <name>EW_NOOPT</name><br>(6)</td>
                  <td>
                     <content>No option<br>The extended driver/library function is necessary.</content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_MODE</name><br>(12)</td>
                  <td>
                     <content>CNC mode error<br>CNC mode is except MDI, MEM, EDIT, TJOG and THND one.</content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_REJECT</name><br>(13)</td>
                  <td>
                     <content>CNC execution denied<br>
                        
                        <li>No program is executed.</li>
                        
                        <li>STL signal is ON.<span class="xis">(30i, 0i-D/F, PMi-A)</span></li>
                        
                        <li>Emergency<span class="xis">(30i, 0i-D/F, PMi-A)</span></li>
                        <!--                     <li>OP signal is OFF in MDi, MEM mode.</li> -->
                        
                        <li>CNC is in DNC/M198 operation.</li>
                        
                        <li>CNC is in RISC operation.</li>
                        </content>
                  </td>
               </tr>
            </table>
            <p>
               <add></add>
            </p>
            <p>
               As for the other return codes or the details, see 
               
               
               "<a href="errcode.htm" target="_parent">Return status of Data window function</a>"
               
               </p><a name="CNC option"></a><p class="label">CNC option</p>
            <p></p>
            <p>For HSSB connection,</p>
            <ul>
               <p>
                  <hssb>The extended driver/library function is necessary.</hssb>
               </p>
            </ul>
            <p>
               <add></add>
            </p><a name="CNC parameter"></a><p class="label">CNC parameter</p>
            <p>This function is related to the following CNC parameter.<br>
               See the manual of CNC parameter for details.</p>
            <p>
               <type>
                  <span class="xis">
                     
                     <ul>
                        
                        <li>Series 0i-D/F„ÄÅ30i-B, PMi-A<br>
                           13104#1<br>
                           </li>
                        </ul>
                     </span>
                  <span class="ois">
                     
                     <ul>
                        13104#1<br>
                        </ul>
                     </span>
                  </type>
            </p>
            <p></p><a name="CNC mode"></a><p class="label">CNC mode</p>
            <p>
               <cmn>It is possible to use in MDI, MEM, EDIT, TJOG, THND mode.</cmn>
            </p>
            <p></p><a name="Available CNC"></a><p class="label">Available CNC</p>
            <table border="1">
               <colgroup width="100em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <tr>
                  <th></th>
                  <th>0i-A</th>
                  <th>0i-B/C(Note)</th>
                  <th>0i-D</th>
                  <th>0i-F</th>
                  <th>15</th>
                  <th>15i</th>
                  <th>16</th>
                  <th>18</th>
                  <th>21</th>
                  <th>16i-A</th>
                  <th>18i-A</th>
                  <th>21i-A</th>
                  <th>16i-B</th>
                  <th>18i-B</th>
                  <th>21i-B</th>
                  <th>30i-A</th>
                  <th>30i-B</th>
               </tr>
               <tr>
                  <td>M (Machining)</td>
                  <td class="">
                     <fs0ia>X</fs0ia>
                  </td>
                  <td class="support">
                     <fs0ib>H</fs0ib>
                  </td>
                  <td class="support">
                     <fs0id>H</fs0id>
                  </td>
                  <td class="support">
                     <fs0if>H</fs0if>
                  </td>
                  <td class="">
                     <fs15>X</fs15>
                  </td>
                  <td class="">
                     <fs15i>X</fs15i>
                  </td>
                  <td class="">
                     <fs16>X</fs16>
                  </td>
                  <td class="">
                     <fs18>X</fs18>
                  </td>
                  <td class="">
                     <fs21>X</fs21>
                  </td>
                  <td class="support">
                     <fs16ia>H</fs16ia>
                  </td>
                  <td class="support">
                     <fs18ia>H</fs18ia>
                  </td>
                  <td class="support">
                     <fs21ia>H</fs21ia>
                  </td>
                  <td class="support">
                     <fs16ib>H</fs16ib>
                  </td>
                  <td class="support">
                     <fs18ib>H</fs18ib>
                  </td>
                  <td class="support">
                     <fs21ib>H</fs21ib>
                  </td>
                  <td class="support">
                     <fs30ia>H</fs30ia>
                  </td>
                  <td class="support">
                     <fs30ib>H</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>T (Turning)  </td>
                  <td class="">
                     <fs0ia>X</fs0ia>
                  </td>
                  <td class="support">
                     <fs0ib>H</fs0ib>
                  </td>
                  <td class="support">
                     <fs0id>H</fs0id>
                  </td>
                  <td class="support">
                     <fs0if>H</fs0if>
                  </td>
                  <td class="">
                     <fs15>X</fs15>
                  </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16>X</fs16>
                  </td>
                  <td class="">
                     <fs18>X</fs18>
                  </td>
                  <td class="">
                     <fs21>X</fs21>
                  </td>
                  <td class="support">
                     <fs16ia>H</fs16ia>
                  </td>
                  <td class="support">
                     <fs18ia>H</fs18ia>
                  </td>
                  <td class="support">
                     <fs21ia>H</fs21ia>
                  </td>
                  <td class="support">
                     <fs16ib>H</fs16ib>
                  </td>
                  <td class="support">
                     <fs18ib>H</fs18ib>
                  </td>
                  <td class="support">
                     <fs21ib>H</fs21ib>
                  </td>
                  <td class="support">
                     <fs30ia>H</fs30ia>
                  </td>
                  <td class="support">
                     <fs30ib>H</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>LC (Loader)  </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16>X</fs16>
                  </td>
                  <td class="">
                     <fs18>X</fs18>
                  </td>
                  <td class="">
                     <fs21>X</fs21>
                  </td>
                  <td class="">
                     <fs16ia>X</fs16ia>
                  </td>
                  <td class="">
                     <fs18ia>X</fs18ia>
                  </td>
                  <td class="">
                     <fs21ia>X</fs21ia>
                  </td>
                  <td class="">
                     <fs16ib>X</fs16ib>
                  </td>
                  <td class="">
                     <fs18ib>X</fs18ib>
                  </td>
                  <td class="">
                     <fs21ib>X</fs21ib>
                  </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
               </tr>
            </table>
            <p></p>
            <table border="1">
               <colgroup width="100em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <tr>
                  <th></th>
                  <th>0i-D</th>
                  <th>0i-F</th>
                  <th>16i</th>
                  <th>18i</th>
                  <th>30i-A</th>
                  <th>30i-B</th>
               </tr>
               <tr>
                  <td>P (Punch press)</td>
                  <td class="support">
                     <fs0id>H</fs0id>
                  </td>
                  <td class="support">
                     <fs0if>H</fs0if>
                  </td>
                  <td class="support">
                     <fs16i>H</fs16i>
                  </td>
                  <td class="support">
                     <fs18i>H</fs18i>
                  </td>
                  <td>
                     -
                     </td>
                  <td class="support">
                     <fs30ib>H</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>L (Laser)      </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="support">
                     <fs16i>H</fs16i>
                  </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="support">
                     <fs30ib>H</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>W (Wire)       </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16i>X</fs16i>
                  </td>
                  <td class="">
                     <fs18i>X</fs18i>
                  </td>
                  <td class="">
                     <fs30ia>X</fs30ia>
                  </td>
                  <td class="">
                     <fs30ib>X</fs30ib>
                  </td>
               </tr>
            </table>
            <p></p><br><table border="1">
               <colgroup width="100em"></colgroup>
               <colgroup align="center" width="86em"></colgroup>
               <colgroup align="center" width="86em"></colgroup>
               <tr>
                  <td>Power Mate i-D</td>
                  <td class="">
                     <d>X</d>
                  </td>
               </tr>
               <tr>
                  <td>Power Mate i-H</td>
                  <td class="">
                     <h>X</h>
                  </td>
               </tr>
               <tr>
                  <td>Power Motion i-A</td>
                  <td class="support"><a>H</a></td>
               </tr>
            </table>
            <p></p>
            <table class="dd">
               <tr>
                  <td></td>
                  <td>"O"</td>
                  <td>:</td>
                  <td>Both Ethernet and HSSB</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"E"</td>
                  <td>:</td>
                  <td>Ethernet</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"H"</td>
                  <td>:</td>
                  <td>HSSB</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"X"</td>
                  <td>:</td>
                  <td>Cannot be used</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"-"</td>
                  <td>:</td>
                  <td>None</td>
               </tr>
            </table>
            <p style="background-color:mistyrose;">Note) 0i-C does not support the HSSB function.</p>
            <p>
               <add><b></b></add>
            </p><a name="Reference"></a><a name="Example"></a></div></FONT><hr>
   </body>
</html>