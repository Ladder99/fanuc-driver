<?xml version="1.0" encoding="Shift_JIS"?>
<?xml-stylesheet type="text/xsl" href="../Fmethod_xsl/fmethod_he_c.xsl"?>

<root>
  <func>


    <title>cnc_rdophistry4</title>



    <declare>
      <vc>
        <include>#include "fwlib32.h"</include>
        <prottype>FWLIBAPI short WINAPI cnc_rdophistry4(unsigned short FlibHndl,unsigned short s_no, unsigned short *e_no, unsigned short *length, void *his); 
        </prottype>
      </vc>
    </declare>



    <doc>
        <cmn>
            <p>Reads the operation history data.<br/>
                Please use this function instead of <a href="History/cnc_rdophistry.htm" target="_parent">cnc_rdophistry</a> function for Series 30i, 0i-D/F and PMi-A.<br/>
            </p>
            <p>The structure of the operation history data is different according to the kind of the record.</p>
            <p>The operation history data and the alarm history data are automatically recorded on the CNC. <br/>
               Kind of these data are accessed, it is necessary to temporarily stop sampling on the CNC. 
               Therefore, it is necessary to execute "Stop logging operation history data"(<a href="History/cnc_stopophis.htm" target="_parent">cnc_stopophis</a>) before this function is used. 
            </p>
            <p>
                The start/end record number means the relative number used at reading the operation history data.<br/>
                These record numbers are valid only at the period from the execution of "Stop logging operation history
                data"(<a href="History/cnc_stopophis.htm" target="_parent">cnc_stopophis</a> function) until the execution of
                "Restart logging operation history data"(<a href="History/cnc_startophis.htm" target="_parent">cnc_startophis</a> function).
            </p>
        </cmn>
        <is>
            <cmn>
                <p>Reads the operation history data.<br/>
                    Please use this function instead of <a href="History/cnc_rdophistry.htm" target="_parent">cnc_rdophistry</a> function.<br/>
                </p>
                <p>The structure of the operation history data is different according to the kind of the record.</p>
                <p>The operation history data and the alarm history data are automatically recorded on the CNC. <br/>
                   Kind of these data are accessed, it is necessary to temporarily stop sampling on the CNC. 
                   Therefore, it is necessary to execute "Stop logging operation history data"(<a href="History/cnc_stopophis.htm" target="_parent">cnc_stopophis</a>) before this function is used. 
                </p>
                <p>
                    The start/end record number means the relative number used at reading the operation history data.<br/>
                    These record numbers are valid only at the period from the execution of "Stop logging operation history
                    data"(<a href="History/cnc_stopophis.htm" target="_parent">cnc_stopophis</a> function) until the execution of
                    "Restart logging operation history data"(<a href="History/cnc_startophis.htm" target="_parent">cnc_startophis</a> function).
                </p>
            </cmn>
        </is>
    </doc>



    <argument>
        <common>
            <vc>
                <item>
                    <name>FlibHndl</name>
                    <type>in</type>
                    <content>
                        <p>
                            Specify the library handle. See "<a href="handle.htm" target="_parent">Library handle</a>" for details.
                        </p>
                    </content>
                </item>
                <item>
                    <name>s_no</name>
                    <type>in</type>
                    <content>
                        <p>
                            Specify the start record number.(more than 1)<br/>
                        </p>
                    </content>
                </item>
                <item>
                    <name>e_no</name>
                    <type>in/out</type>
                    <content>
                        <p>
                            Specify the pointer to the end record number.(more than 1)<br/>
                            The last record number which was read actually is returned.
                        </p>
                    </content>
                </item>
                <item>
                    <name>length</name>
                    <type>in/out</type>
                    <content>
                        <p>
                            Specify the data block length which is enough to store the
                            specified operation history data.<br/>
                            One operation history data is set in the ODBOPHIS4 structure and
                            the size of the structure is represented by rec_len. 
                            This structure is lined up in order of number of operation history data. 
                            So, specify the sum of rec_len of these structures.<br/>

                            When the plural data is acquired, the second or later data is acquired just behind the previous data as follows. (It is not the order of the array of a structure.)<br/>
                            When you read the second or later data, calculate the pointer which adds data length (rec_len) to the top pointer of data immediately before.<br/>
                        <br/>
                            <img src="History/His_reclen.gif"></img><br/>


                            Because the size of data which was read actually is returned,
                            it is possible to specify the length more than the actual size.
                        </p>
                            <img src="History/mdi_key.gif"></img><br/>
                            <img src="History/signal.gif"></img><br/>
                            <img src="History/alarm.gif"></img><br/>
                            <img src="History/date_time.gif"></img><br/>
                            <img src="History/ext_alarm.gif"></img><br/>
                            <img src="History/ext_msg_alarm.gif"></img><br/>
                            <img src="History/operator_msg.gif"></img><br/>
                            <img src="History/tooloffset.gif"></img><br/>
                            <img src="History/parameter.gif"></img><br/>
                            <img src="History/workoffset.gif"></img><br/>
                            <img src="History/custommacro.gif"></img><br/>
                            <img src="History/custommacro2.gif"></img><br/>
                            <img src="History/screennumber.gif"></img><br/>
                            <img src="History/unsupport.gif"></img><br/>
                    </content>
                </item>
                <item>
                    <name>his</name>
                    <type>out</type>
                    <content>
                        <p>
                            Using the ODBOPHIS4 structure can refer each operation history data.
                        </p>
<pre>
typedef struct odbophis4 {
    short  rec_len;             /* Length             */
    short  rec_type;            /* Record type        */
    union {
        struct {
            char    key_code;   /* Key code           */
            char    pw_flag;    /* Power-on flag      */
            short   pth_no;     /* Path number        */
            short   ex_flag;    /* External MDI key flag*/
            short   hour;       /* Hour */
            short   minute;     /* Minute */
            short   second;     /* Second */
        } rec_mdi;              /* MDI */
        struct {
            short   sig_name;   /* Signal name        */
            short   sig_no;     /* Signal number      */
            char    sig_old;    /* Bit pattern before transition */
            char    sig_new;    /* Bit pattern after  transition */
            short   pmc_no;     /* PMC number         */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   dummy;
        } rec_sgn;              /* Signal             */
        struct {
            short   alm_grp;    /* Alarm type         */
            short   alm_no;     /* Relative axis number in the path or Relative spindle number in the path */
            short   axis_no;    /* Axis number        */
            short   year;       /* Year               */
            short   month;      /* Month              */
            short   day;        /* Day                */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number        */
        } rec_alm;              /* Alarm              */
        struct {
            short   evnt_type;  /* Event type         */
            short   year;       /* Year               */
            short   month;      /* Month              */
            short   day;        /* Day                */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   dummy;
        } rec_date;             /* Date/Time          */
        struct {
            short   alm_grp;    /* Alarm type         */
            short   alm_no;     /* Alarm number       */
            short   axis_no;    /* Absolute axis number or Absolute spindle number */
            short   year;       /* Year               */
            short   month;      /* Month              */
            short   day;        /* Day                */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number        */
            short   sys_alm;    /* unused */
            short   dsp_flg;    /* Flag for displaying */
            short   axis_num;   /* Total axis number  */
            long    g_modal[10];/* Modal data of G code */
            char    g_dp[10];   /* #7=1 There is a command in the present block. */
                                /* #6Å`#0 place of decimal point */
            long    a_modal[10];/* Modal data of B,D,E,F,H,M,N,O,S,T code */
            char    a_dp[10];   /* #7=1 There is a command in the present block. */
                                /* #6Å`#0 place of decimal point */
            long    abs_pos[32];/* Absolute position in alarm occurring */
            char    abs_dp[32]; /* Absolute position place of decimal point in alarm occurring */
            long    mcn_pos[32];/* Machine position in alarm occurring */
            char    mcn_dp[32]; /* Machine position place of decimal point in alarm occurring */
        } rec_ial;                /* Additional information alarm */
        struct {
            short   alm_grp;    /* Alarm type         */
            short   alm_no;     /* Alarm number       */
            short   axis_no;    /* Absolute axis number or Absolute spindle number */
            short   year;       /* Year               */
            short   month;      /* Month              */
            short   day;        /* Day                */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number        */
            short   sys_alm;    /* unused */
            short   dsp_flg;    /* Flag for displaying */
            short   axis_num;   /* Total axis number */
            char    alm_msg[64];/* Alarm message */
            long    g_modal[10];/* Modal data of G code */
            char    g_dp[10];   /* #7=1 There is a command in the present block. */
                                /* #6Å`#0 place of decimal point */
            long    a_modal[10];/* Modal data of B,D,E,F,H,M,N,O,S,T code */
            char    a_dp[10];   /* #7=1 There is a command in the present block. */
                                /* #6Å`#0 place of decimal point */
            long    abs_pos[32];/* Absolute position in alarm occurring */
            char    abs_dp[32]; /* Absolute position place of decimal point in alarm occurring */
            long    mcn_pos[32];/* Machine position in alarm occurring */
            char    mcn_dp[32]; /* Machine position place of decimal point in alarm occurring */
        } rec_mal;                /* Additional information and message alarm */
        struct {
            short   dsp_flg;    /* Flag for displaying */
            short   om_no;      /* Message number     */
            short   year;       /* Year               */
            short   month;      /* Month              */
            short   day;        /* Day                */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            char    ope_msg[256];/* Message */
        } rec_opm;              /* External operator's message */
        struct {
            short   ofs_grp;    /* Tool offset data type */
            short   ofs_no;     /* Tool offset number */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number */
            long    ofs_old;    /* Tool offset data before transition */
            long    ofs_new;    /* Tool offset data after transition */
            short   old_dp;     /* Tool offset data place of decimal point before transition */
            short   new_dp;     /* Tool offset data place of decimal point after transition */
        } rec_ofs;              /* Tool offset transition */
        struct {
            short   prm_grp;    /* Parameter data type */
            short   prm_num;    /* Parameter number */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   prm_len;    /* Parameter data length */
            long    prm_no;     /* Parameter number   */
            long    prm_old;    /* Parameter data before transition */
            long    prm_new;    /* Parameter data after transition */
            short   old_dp;     /* Parameter data place of decimal point before transition */
            short   new_dp;     /* Parameter data place of decimal point after transition */
        } rec_prm;              /* Parametertransition */
        struct {
            short   ofs_grp;    /* Work offset data type */
            short   ofs_no;     /* Work offset number */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number        */
            short   axis_no;    /* Axis number */
            short   dummy;
            long    ofs_old;    /* Work offset data before transition */
            long    ofs_new;    /* Work offset data after transition */
            short   old_dp;     /* Work offset data place of decimal point before transition */
            short   new_dp;     /* Work offset data place of decimal point after transition */
        } rec_wof;              /* Work offset transition */
        struct {
            short   mac_no;     /* Custom macro common variable number */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number        */
            long    mac_old;    /* Common variable data before transition */
            long    mac_new;    /* Common variable data after transition */
            short   old_dp;     /* Common variable data place of decimal point before transition */
            short   new_dp;     /* Common variable data place of decimal point after transition */
        } rec_mac;              /* Custom macro common variable transition */
        struct {
            long    mac_no;     /* Custom macro common variable number(Extension) */
            short   hour;       /* Hour               */
            short   minute;     /* Minute             */
            short   second;     /* Second             */
            short   pth_no;     /* Path number        */
            long    mac_old;    /* Common variable data before transition */
            long    mac_new;    /* Common variable data after transition */
            short   old_dp;     /* Common variable data place of decimal point before transition */
            short   new_dp;     /* Common variable data place of decimal point after transition */
        } rec_mac2;             /* Custom macro common variable transition */
        struct {
            short   scrn_old;   /* Old screen number */
            short   scrn_new;   /* New screen number */
            short   dummy;
            short   hour;       /* Hour */
            short   minute;     /* Minute */
            short   second;     /* Second */
        } rec_scrn;             /* Change of screen(number) */
    } u;
} ODBOPHIS4 ;
</pre>
                        <dl>
                            <dt>rec_len</dt>
                                <dd>Length of the ODBOPHIS4 structure</dd>
                            <dt>rec_type</dt>
                            <dd>Record type</dd>
                            <dd><table class="dd">
                                    <tr><td>0</td><td>:</td><td>MDI key</td></tr>
                                    <tr><td>1</td><td>:</td><td>Signal</td></tr>
                                    <tr><td>2</td><td>:</td><td>Alarm</td></tr>
                                    <tr><td>3</td><td>:</td><td>Date/Time</td></tr>
                                    <tr><td>4</td><td>:</td><td>Custom macro common variable transition</td></tr>
                                    <tr><td>5</td><td>:</td><td>Parameter transition</td></tr>
                                    <tr><td>6</td><td>:</td><td>External operator's message</td></tr>
                                    <tr><td>7</td><td>:</td><td>Tool offset transition</td></tr>
                                    <tr><td>8</td><td>:</td><td>Work offset transition</td></tr>
                                    <tr><td>9</td><td>:</td><td>Additional information alarm</td></tr>
                                    <tr><td>10</td><td>:</td><td>Additional information and message alarm</td></tr>
                                    <tr><td>11</td><td>:</td><td>Custom macro common variable(Extension) transition</td></tr>
                                    <tr><td>12</td><td>:</td><td>Change of Screen(number)</td></tr>
                                    <tr><td>-1</td><td>:</td><td>History data of unsupport</td>
                                    </tr>
                                </table></dd>
                            <dt>key_code</dt>
                                <dd>Key code</dd>
                               <table border="1" width="60%">
                                    <col span="9" width="10%" align="center"/>
                                    <tr><th>Å@</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr>
                                    <tr><td><b>0</b></td><td>&#160;</td><td>&#160;</td><td>SP</td><td>0</td><td>@</td><td>P</td><td>`</td><td>&#160;</td></tr>
                                    <tr><td><b>1</b></td><td>&#160;</td><td>&#160;</td><td>!</td><td>1</td><td>A</td><td>Q</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>2</b></td><td>&#160;</td><td>&#160;</td><td>"</td><td>2</td><td>B</td><td>R</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>3</b></td><td>&#160;</td><td>&#160;</td><td>#</td><td>3</td><td>C</td><td>S</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>4</b></td><td>&#160;</td><td>&#160;</td><td>$</td><td>4</td><td>D</td><td>T</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>5</b></td><td>&#160;</td><td>&#160;</td><td>%</td><td>5</td><td>E</td><td>U</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>6</b></td><td>&#160;</td><td>&#160;</td><td>&amp;</td><td>6</td><td>F</td><td>V</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>7</b></td><td>&#160;</td><td>&#160;</td><td>'</td><td>7</td><td>G</td><td>W</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>8</b></td><td>&#160;</td><td>&#160;</td><td>(</td><td>8</td><td>H</td><td>X</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>9</b></td><td>TAB</td><td>&#160;</td><td>)</td><td>9</td><td>I</td><td>Y</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>A</b></td><td>EOB</td><td>&#160;</td><td>*</td><td>:</td><td>J</td><td>Z</td><td>&#160;</td><td>&#160;</td></tr>
                                    <tr><td><b>B</b></td><td>&#160;</td><td>&#160;</td><td>+</td><td>;</td><td>K</td><td>[</td><td>&#160;</td><td>{</td></tr>
                                    <tr><td><b>C</b></td><td>&#160;</td><td>&#160;</td><td>,</td><td>&lt;</td><td>L</td><td>\</td><td>&#160;</td><td>|</td></tr>
                                    <tr><td><b>D</b></td><td>&#160;</td><td>&#160;</td><td>-</td><td>=</td><td>M</td><td>]</td><td>&#160;</td><td>}</td></tr>
                                    <tr><td><b>E</b></td><td>&#160;</td><td>&#160;</td><td>.</td><td>&gt;</td><td>N</td><td>&#160;</td><td>&#160;</td><td>~</td></tr>
                                    <tr><td><b>F</b></td><td>&#160;</td><td>&#160;</td><td>/</td><td>?</td><td>O</td><td>_</td><td>&#160;</td><td>&#160;</td></tr>
                                </table>
                                <br/>
                                <table border="1" width="60%">
                                    <col span="9" width="10%" align="center"/>
                                    <tr>
                                        <th>&#160;</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th>
                                    </tr>
                                    <tr>
                                        <td><b>0</b></td><td>&#160;</td><td>RESET</td><td>[SKV9]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F1]</td>
                                    </tr>
                                    <tr>
                                        <td><b>1</b></td><td>&#160;</td><td>&#160;</td><td>[SKV8]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F2]</td>
                                    </tr>
                                    <tr>
                                        <td><b>2</b></td><td>&#160;</td><td>&#160;</td><td>[SKV7]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F3]</td>
                                    </tr>
                                    <tr>
                                        <td><b>3</b></td><td>&#160;</td><td>&#160;</td><td>[SKV6]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F4]</td>
                                    </tr>
                                    <tr>
                                        <td><b>4</b></td><td>SHIFT</td><td>INSERT</td><td>[SKV5]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>AUX</td><td>[F5]</td>
                                    </tr>
                                    <tr>
                                        <td><b>5</b></td><td>&#160;</td><td>DELETE</td><td>[SKV4]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F6]</td>
                                    </tr>
                                    <tr>
                                        <td><b>6</b></td><td>CAN</td><td>ALTER</td><td>[SKV3]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F7]</td>
                                    </tr>
                                    <tr>
                                        <td><b>7</b></td><td>&#160;</td><td>ALT</td><td>[SKV2]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>[F8]</td>
                                    </tr>
                                    <tr>
                                        <td><b>8</b></td><td>&#8594;</td><td>INPUT</td><td>[SKV1]</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>POS</td><td>[F9]</td>
                                    </tr>
                                    <tr>
                                        <td><b>9</b></td><td>&#8592;</td><td>CALC</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>PROG</td><td>[F10]</td>
                                    </tr>
                                    <tr>
                                        <td><b>A</b></td><td>&#8595;</td><td>HELP</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>OFFSET<br/>SETTING</td><td>&#160;</td>
                                    </tr>
                                    <tr>
                                        <td><b>B</b></td><td>&#8593;</td><td>CTRL</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>SYSTEM</td><td>&#160;</td>
                                    </tr>
                                    <tr>
                                        <td><b>C</b></td><td>&#160;</td><td>ABC/abc</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>MESSAGE</td><td>&#160;</td>
                                    </tr>
                                    <tr>
                                        <td><b>D</b></td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>GRAPH</td><td>&#160;</td>
                                    </tr>
                                    <tr>
                                        <td><b>E</b></td><td>Page&#8595;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>CUSTOM</td><td>[FR]</td>
                                    </tr>
                                    <tr>
                                        <td><b>F</b></td><td>Page&#8593;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>CUSTOM2</td><td>[FL]</td>
                                    </tr>
                                </table>
                            <dt>pw_flag</dt>
                            <dd>Power-on flag</dd>
                                <dd><table class="dd">
                                    <tr>
                                        <td>1</td>
                                        <td>:</td>
                                        <td>For power on</td>
                                    </tr>
                                    <tr>
                                        <td>0</td>
                                        <td>:</td>
                                        <td>Usually, <b>0</b> is stored</td>
                                    </tr>
                                </table></dd>
                            <dt>ex_flag</dt>
                                <dd>External MDI key flag</dd>
                                <dd><table class="dd">
                                    <tr>
                                        <td>1</td>
                                        <td>:</td>
                                        <td>External MDI key</td>
                                    </tr>
                                    <tr>
                                        <td>0</td>
                                        <td>:</td>
                                        <td>Usual MDI key</td>
                                    </tr>
                                </table></dd>
                            <dt>sig_name</dt>
                            <dd>Signal name</dd>
                                <dd><table class="dd">
                                    <tr>
                                        <td>1</td>
                                        <td>:</td>
                                        <td>X</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>:</td>
                                        <td>G</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>:</td>
                                        <td>Y</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>:</td>
                                        <td>F</td>
                                    </tr>
                                </table></dd>
                            <dt>sig_no</dt>
                                <dd>Signal number</dd>
                                <dd><table class="dd">
                                    <tr>
                                        <td>X</td>
                                        <td>:</td>
                                        <td>0,..,127</td>
                                    </tr>
                                    <tr>
                                        <td>G</td>
                                        <td>:</td>
                                        <td>0,..,767</td>
                                    </tr>
                                    <tr>
                                        <td>Y</td>
                                        <td>:</td>
                                        <td>0,..,127</td>
                                    </tr>
                                    <tr>
                                        <td>F</td>
                                        <td>:</td>
                                        <td>0,..,767</td>
                                    </tr>
                                </table></dd>
                            <dt>sig_old</dt>
                                <dd>Bit pattern before transition</dd>
                            <dt>sig_new</dt>
                                <dd>Bit pattern after transition</dd>
                            <dt>alm_grp</dt>
                            <dd>Alarm type</dd>
                                    <dd><table class="dd">
                                            <tr><td>0 </td> <td>:</td> <td>Parameter switch on</td>        <td>(SW)</td> </tr>
                                            <tr><td>1 </td> <td>:</td> <td>Power off parameter set</td>    <td>(PW)</td> </tr>
                                            <tr><td>2 </td> <td>:</td> <td>I/O error</td>                  <td>(IO)</td> </tr>
                                            <tr><td>3 </td> <td>:</td> <td>Foreground P/S</td>             <td>(PS)</td> </tr>
                                            <tr><td>4 </td> <td>:</td> <td>Overtravel,External data</td>   <td>(OT)</td> </tr>
                                            <tr><td>5 </td> <td>:</td> <td>Overheat alarm</td>             <td>(OH)</td> </tr>
                                            <tr><td>6 </td> <td>:</td> <td>Servo alarm</td>                <td>(SV)</td> </tr>
                                            <tr><td>7 </td> <td>:</td> <td>Data I/O error</td>             <td>(SR)</td> </tr>
                                            <tr><td>8 </td> <td>:</td> <td>Macro alarm</td>                <td>(MC)</td> </tr>
                                            <tr><td>9 </td> <td>:</td> <td>Spindle alarm</td>              <td>(SP)</td> </tr>
                                            <tr><td>10</td> <td>:</td> <td>Other alarm(DS)</td>      <td>(DS)</td> </tr>
                                            <tr><td>11</td> <td>:</td> <td>Alarm concerning Malfunction prevent functions</td>      <td>(IE)</td> </tr>
                                            <tr><td>12</td> <td>:</td> <td>Background P/S</td>             <td>(BG)</td> </tr>
                                            <tr><td>13</td> <td>:</td> <td>Synchronized error</td>          <td>(SN)</td> </tr>
                                            <tr><td>14</td> <td>:</td> <td>(reserved)</td>                 <td></td>     </tr>
                                            <tr><td>15</td> <td>:</td> <td>External alarm message</td>     <td>(EX)</td> </tr>
                                            <tr><td>19</td> <td>:</td> <td>PMC error</td>                  <td>(PC)</td> </tr>
                                    </table>
                                    <table class="dd">
                                            <tr><td>20 to 31</td> <td>:</td> <td>(Not used)</td> </tr>
                                    </table></dd>
                            <dt>alm_no</dt>
                                <dd>Alarm number</dd>
                            <dt>axis_no</dt>
                                <dd>
                                    <li>rec_type 2(Alarm), rec_type 9(Additional information alarm) and rec_type 10(Additional information and message alarm)</li>
                                        <ul>The relative axis number(1,..,max controlled axes) in the path or the relative spindle number(1,..,max spindle number) in the path is set in this variable.</ul>
                                        <ul>When the flexible path axis assignment function is valid, the absolute axis number + 1000(1001,..,max controlled axis number + 1000) or the relative spindle number(1,..,max spindle number) in the path is set in this variable.</ul>
                                        <ul>(Absolute axis number or absolute spindle number <b>0</b> is stored for an unrelated alarm to the axis and the spindle.)</ul>
                                    <li>rec_type 8(Work offset transition)</li>
                                        <ul>The relative axis number(0,..,max controlled axes - 1) in the path is set in this variable.</ul>
                                        <ul>When the flexible path axis assignment function is valid, the absolute axis number + 1000(1001,..,max controlled axis number + 1000) is set in this variable.</ul>
                                </dd>
                            <dt>year</dt>
                                <dd>Year   (1995,..,2094)<br/></dd>
                            <dt>month</dt>
                                <dd>Month  (1,..,12)<br/></dd>
                            <dt>day</dt>
                                <dd>Day   (1,..,31)<br/></dd>
                            <dt>hour</dt>
                                <dd>Hour   (0,..,23)<br/></dd>
                            <dt>minute</dt>
                                <dd>Minute (0,..,59)<br/></dd>
                            <dt>second</dt>
                                <dd>Second (0,..,59)</dd>
                            <dt>evnt_type</dt>
                                <dd>Event type<br/>
                                    <table class="dd">
                                        <tr>
                                            <td>0</td>
                                            <td>:</td>
                                            <td>Power off</td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>:</td>
                                            <td>Power on</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>:</td>
                                            <td>Change date</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>:</td>
                                            <td>Time stamp</td>
                                        </tr>
                                        <tr>
                                             <td>4</td>
                                             <td>:</td>
                                             <td>Erase history data</td>
                                         </tr>
                                     </table>
                                </dd>
                            <dt>pth_no</dt>
                                <dd>Path number(1,..,10)</dd>
                            <dt>pmc_no</dt>
                                <dd>PMC number(1,..,3)</dd>
                            <dt>axis_num</dt>
                            <dd>Total axis number(1,..,32)</dd>
                            <dt>g_modal</dt>
                            <dd>Modal G code of specified G code group at alarm occurring (nonexistence -1)</dd>
                            <dd>Modal G code group number is specified by the parameter from No.12990 to No.12999.<br/></dd>
                            <dt>g_dp</dt>
                            <dd>Place of decimal point of Modal G code (nonexistence -1)</dd>
                            <dd>
                                #7=1 There is a command in the present block.<br/>
                                #6Å`#0 place of decimal point
                            </dd>
                            <dt></dt>
                            <dd>
                                <img src="History/decimal.gif"></img><br/>
                                #7=0 There is not a command in the present block. <br/>
                                &#160;&#160;&#160;&#160;=1 There is a command in the present block.
                            </dd>
                            <dt></dt>
                            <dd>
                                <table>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>g_modal[0]</td><td>,g_dp[0]=parameter12990</td></tr>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>&#160;&#160;&#160;&#160;:</td><td>&#160;&#160;&#160;&#160;:</td></tr>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>g_modal[9]</td><td>,g_dp[9]=parameter12990</td></tr>
                                </table>
                            </dd>
                            <dt>a_modal</dt>
                            <dd>
                                Modal data of 2nd auxiliary function(prm3460),D,E,F,H,M,N,O,S,T code in alarm occurring(nonexistence -1)
                            </dd>
                            <dd>
                                <table>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>a_modal[0]</td><td>,a_dp[0]=2nd auxiliary function code</td><td>,a_modal[1]</td><td>,a_dp[1]=D code</td></tr>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>a_modal[2]</td><td>,a_dp[2]=E code</td><td>,a_modal[3]</td><td>,a_dp[3]=F code</td></tr>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>a_modal[4]</td><td>,a_dp[2]=H code</td><td>,a_modal[5]</td><td>,a_dp[3]=M code</td></tr>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>a_modal[6]</td><td>,a_dp[2]=Sequence number</td><td>,a_modal[7]</td><td>,a_dp[3]=Promgam number or Program Name Note)</td></tr>
                                    <tr><td>&#160;&#160;&#160;&#160;</td><td>a_modal[8]</td><td>,a_dp[2]=S code</td><td>,a_modal[9]</td><td>,a_dp[3]=T code</td></tr>
                                </table>
                            </dd>
                            <dt></dt>
                            <dd>
                                &#160;&#160;&#160;&#160; Note) In case of program name, specify 5 charactors of head.<br/>
                                <img src="History/example.gif"></img><br/>
                            </dd>
                            <dt>a_dp</dt>
                            <dd>
                                #7=1 There is a command in the present block.(nonexistence -1)<br/>
                                #6Å`#0 place of decimal point
                            </dd>
                            <dt></dt>
                            <dd>
                                <img src="History/decimal.gif"></img><br/>
                                #7=0 There is not a command in the present block.<br/>
                                &#160;&#160;&#160;&#160;=1 There is a command in the present block.
                            </dd>
                            <dt></dt>
                            <dt>abs_pos</dt>
                            <dd>
                                Absolute position in alarm occurring
                            </dd>
                            <dt>abs_dp</dt>
                            <dd>
                                Absolute position place of decimal point in alarm occurring
                            </dd>
                            <dt>mcn_pos</dt>
                            <dd>
                                Machine position in alarm occurring
                            </dd>
                            <dt>mcn_dp</dt>
                            <dd>
                                Machine position place of decimal point in alarm occurring<br/>
                                *More than axis number is unused.
                            </dd>
                            <dt>alm_msg</dt>
                            <dd>
                                Alarm message
                            </dd>
                            <dt>dsp_flg</dt>
                            <dd>
                                Flag for message displaying <br/>
                                In case of the Macro alarm(alm_grp=8), the state of 6008#1 can be acquired.<br/>
                                In case of the External alarm message(alm_grp=15), the state of 6301#0 can be acquired.<br/>
                                In case of the External operator's message, the state of 6301#1 can be acquired.<br/>
                                * The status of a point at alarm occurring can get.<br/>
                            </dd>
                            <dt>om_no</dt>
                            <dd>
                                Message number
                            </dd>
                            <dt>ope_msg</dt>
                            <dd>
                                Message( null(\0) end)
                            </dd>
                            <dt>ofs_grp</dt>
                            <dd>
                                Tool offset data type
                                <li>rec_type:7 In case of tool offset transition.(Kind of tool offset is set.)</li>
                            </dd>
                            <dd>
                                <table class="dd">
                                    <tr>
                                        <td>0</td><td>:</td><td>Tool offset</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>&#160;</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M series Memory A)</td>
                                    </tr>
                                    <tr>
                                        <td>1</td><td>:</td><td>Geometry offset</td>
                                        <td>&#160;</td>
                                        <td>2</td><td>:</td><td>Wear offset</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M series Memory B)</td>
                                    </tr>
                                    <tr>
                                        <td>3</td><td>:</td><td>Tool length offset(geometry)</td>
                                        <td>&#160;</td>
                                        <td>4</td><td>:</td><td>Tool length offset(wear)</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M series Memory C)</td>
                                    </tr>
                                    <tr>
                                        <td>5</td><td>:</td><td>Tool cutter radius offset(geometry)</td>
                                        <td>&#160;</td>
                                        <td>6</td><td>:</td><td>Tool cutter radius offset(wear)</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M series Memory C)</td>
                                    </tr>
                                    <tr>
                                        <td>7</td><td>:</td><td>X-axis tool offset</td>
                                        <td>&#160;</td>
                                        <td>8</td><td>:</td><td>Z-axis tool offset</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(T series Memory A)</td>
                                    </tr>
                                    <tr>
                                        <td>9</td><td>:</td><td>X-axis tool offset(geometry)</td>
                                        <td>&#160;</td>
                                        <td>10</td><td>:</td><td>X-axis tool offset(wear)</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(T series Memory B)</td>
                                    </tr>
                                    <tr>
                                        <td>11</td><td>:</td><td>Z-axis tool offset(geometry)</td>
                                        <td>&#160;</td>
                                        <td>12</td><td>:</td><td>Z-axis tool offset(wear)</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M/T series Memory B)</td>
                                    </tr>
                                    <tr>
                                        <td>13</td><td>:</td><td>Tool nose radius offset</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>&#160;</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M/T series Memory A)</td>
                                    </tr>
                                    <tr>
                                        <td>14</td><td>:</td><td>Tool nose radius offset(geometry)</td>
                                        <td>&#160;</td>
                                        <td>15</td><td>:</td><td>Tool nose radius offset(wear)</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(M/T series Memory A)</td>
                                    </tr>
                                    <tr>
                                        <td>16</td><td>:</td><td>Y-axis tool offset</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>&#160;</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(T series Memory A)</td>
                                    </tr>
                                    <tr>
                                        <td>17</td><td>:</td><td>Y-axis tool offset(geometry)</td>
                                        <td>&#160;</td>
                                        <td>18</td><td>:</td><td>Y-axis tool offset(wear)</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(T series Memory B)</td>
                                    </tr>
                                    <tr>
                                        <td>19</td><td>:</td><td>Direction of tool nose</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>&#160;</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(Common    ÅFM/T series(M series PRM5009#5=1))</td>
                                    </tr>
                                    <tr>
                                        <td>20</td><td>:</td><td>X-axis second geometry offset</td>
                                        <td>&#160;</td>
                                        <td>21</td><td>:</td><td>Z-axis second geometry offset</td>
                                        <td>&#160;</td>
                                        <td>&#160;</td><td>&#160;</td><td>(T series )</td>
                                    </tr>
                                    <tr>
                                        <td>22</td><td>:</td><td>Y-axis second geometry offset</td>
                                    </tr>
                                 </table>
                            </dd>
                            <dd>
                                <li>rec_type:8 In case of work offset transition(Kind of work offset data is set.)</li>
                                <table class="dd">
                                    <tr>
                                        <td>0</td><td>:</td><td>Work offset(EXT,G54Å`G59)</td>
                                    </tr>
                                    <tr>
                                        <td>1</td><td>:</td><td>Work offset extension(G54.1P1Å`G54.1P300)</td>
                                    </tr>
                                    <tr>
                                        <td>2</td><td>:</td><td>Volume of work shift(Only T series)</td>
                                    </tr>
                                </table>
                            </dd>
                            <dt>ofs_no</dt>
                            <dd>
                                Offset number
                                <li>rec_type:7 In case of tool offset transition, tool offset number(1,..,9999)</li>
                                <li>rec_type:8 In case of work offset transition, work offset is as follows.</li>
                                <table class="dd">
                                    <tr>
                                        <td>ofs_grp</td><td>=</td><td>0</td><td>:</td><td>0=EXT,1=G54,2=G55,3=G56,4=G57,5=G58,6=G59</td>
                                    </tr>
                                    <tr>
                                        <td>&#160;</td><td>=</td><td>1</td><td>:</td><td>1,..,300</td>
                                    </tr>
                                    <tr>
                                        <td>&#160;</td><td>=</td><td>2</td><td>:</td><td>Invalid</td>
                                    </tr>
                                </table>
                            </dd>
                            <dt>ofs_old</dt>
                            <dd>
                                Tool/Work offset data before transition.
                            </dd>
                            <dt>ofs_new</dt>
                            <dd>
                                Tool/Work offset data after transition.
                            </dd>
                            <dt>old_dp</dt>
                            <dd>
                                Place of decimal point before transition(*1) 
                            </dd>
                            <dt>new_dp</dt>
                            <dd>
                                Place of decimal point after transition(*1) 
                            </dd>
                            <dt></dt>
                            <dd>
                                (*1) Data type is tool/work offset, parameter and custom macro common variable. 
                                When the variable value is custom macro common variable, refer to the "Note) In case of custom macro common variable".
                            </dd>
                            <dt>mac_old</dt>
                            <dd>
                                Custom macro common variable data before transition
                            </dd>
                            <dt>mac_new</dt>
                            <dd>
                                Custom macro common variable data after transition
                            </dd>
                                 note) In case of custom macro common variable, shows data format=M*10**(-E)).
                            <dd>
                                <table class="dd">
                                    <tr>
                                        <td>mac_old,mac_new</td><td>:</td><td>value of variable(=M)</td>
                                    </tr>
                                    <tr>
                                        <td>old_dp,new_dp</td><td>:</td><td>number of places of decimals(=E) (-128(0x80)Å`127(0x7f))</td>
                                    </tr>
                                </table>
                                &lt;example&gt;
                                <li>When the variable value is 12.345, each variables are read as follows.</li>
                                <table class="dd">
                                    <tr>
                                        <td>tdmcr_val = 1234500000</td>
                                    </tr>
                                    <tr>
                                        <td>dec_val = 8</td>
                                    </tr>
                                    <tr>
                                        <td>Å® 1234500000*(10**(-8)) = 12.345</td>
                                    </tr>
                                </table>
                                <li>When the variable value is 123456789012345, each variables are read as follows.</li>
                                <table class="dd">
                                    <tr>
                                        <td>mcr_val = 1234567890</td>
                                    </tr>
                                    <tr>
                                        <td>dec_val = -5</td>
                                    </tr>
                                    <tr>
                                        <td>Å® 1234567890*(10**5) = 123456789000000</td>
                                    </tr>
                                </table>
                                * Particularity
                                <li>In case of "vacant"ÅF </li>
                                <table class="dd">
                                    <tr>
                                        <td>mac_old,mac_new =  0ÅAold_dp,new_dp = -1(0xff)</td>
                                    </tr>
                                </table>
                                <li>In case of overflowÅF</li>
                                <table class="dd">
                                    <tr>
                                        <td>mac_old,mac_new = -1ÅAold_dp,new_dp = -1(0xff)</td>
                                    </tr>
                                </table>
                            </dd>
                            <dt>prm_grp</dt>
                            <dd>
                                Paramter data type(Kind of parameter data is set.)<br/>
                                1:Axis type, 2:Spildle type, 3:Path type, 4:Machine group type, 0:Other
                            </dd>
                            <dt>prm_num</dt>
                            <dd>
                                Parameter data type(prm_grp) is valid range from 1 to 4.<br/>
                                prm_grp=1 : Absolute number(1,..,MAX32Åj<br/>
                                prm_grp=2 : Absolute spindle number(1,..,MAX8)<br/>
                                prm_grp=3 : Path number(1,..,10)<br/>
                                prm_grp=4 : Machine group number(1,..,3)
                            </dd>
                            <dt>prm_len</dt>
                            <dd>
                                Parameter data length<br/>
                                0: BIT, 1:INT8, 2:INT16, 3:INT32, 4:REAL64
                            </dd>
                            <dt>prm_no</dt>
                            <dd>
                                Parameter number(0,..,99999)
                            </dd>
                            <dt>prm_old</dt>
                            <dd>
                                Paramter data befor transition
                            </dd>
                            <dt>prm_new</dt>
                            <dd>
                                Paramter data after transition
                            </dd>
                         </dl>
                    </content>
                </item>
            </vc>
        </common>
    </argument>



    <errcode>
        <item>
            <name>EW_FUNC</name>
            <content>
                <a href="History/cnc_stopophis.htm" target="_parent">cnc_stopophis</a> function has not been executed.
            </content>
        </item>
        <item>
            <name>EW_LENGTH</name>
            <content>
                Data block length error<br/>
                Size of area to store the operation history data(length) is wrong.
            </content>
        </item>
        <item>
            <name>EW_NUMBER</name>
            <content>
                Data number error<br/>
                The specification of the record number (s_no, e_no) is wrong.
            </content>
        </item>
        <item>
            <name>EW_NOOPT</name>
            <content>
                No option<br/>
                The extended driver/library function is necessary.
            </content>
        </item>
        <add></add>
    </errcode>



    <option>
        <hssb>
            <p>This function needs the extended driver/library function.</p>
        </hssb>
    </option>



    <parameter>
        <type>
            <ul>
                <li>
                    3112#3,3195#5,#6,3196#0-#3,#6,#7,12990-12999,3460,6008#1,6301#0,6301#1 (influenced by setting)<br/>
                </li>
            </ul>
        </type>
    </parameter>



    <mode>
    </mode>



    <support>
        <m>
            <fs0ia>X</fs0ia>
            <fs0ib>X</fs0ib>
            <fs0id>O</fs0id>
            <fs0if>O</fs0if>
            <fs15>X</fs15>
            <fs15i>X</fs15i>
            <fs16>X</fs16>
            <fs18>X</fs18>
            <fs21>X</fs21>
            <fs16ia>X</fs16ia>
            <fs18ia>X</fs18ia>
            <fs21ia>X</fs21ia>
            <fs16ib>X</fs16ib>
            <fs18ib>X</fs18ib>
            <fs21ib>X</fs21ib>
            <fs30ia>O</fs30ia>
            <fs30ib>O</fs30ib>
        </m>
        <t>
            <fs0ia>X</fs0ia>
            <fs0ib>X</fs0ib>
            <fs0id>O</fs0id>
            <fs0if>O</fs0if>
            <fs15>X</fs15>
            <fs15i>X</fs15i>
            <fs16>X</fs16>
            <fs18>X</fs18>
            <fs21>X</fs21>
            <fs16ia>X</fs16ia>
            <fs18ia>X</fs18ia>
            <fs21ia>X</fs21ia>
            <fs16ib>X</fs16ib>
            <fs18ib>X</fs18ib>
            <fs21ib>X</fs21ib>
            <fs30ia>O</fs30ia>
            <fs30ib>O</fs30ib>
        </t>
        <lc>
            <fs0ia>X</fs0ia>
            <fs0ib>X</fs0ib>
            <fs0id>X</fs0id>
            <fs0if>X</fs0if>
            <fs15>X</fs15>
            <fs15i>X</fs15i>
            <fs16>X</fs16>
            <fs18>X</fs18>
            <fs21>X</fs21>
            <fs16ia>X</fs16ia>
            <fs18ia>X</fs18ia>
            <fs21ia>X</fs21ia>
            <fs16ib>X</fs16ib>
            <fs18ib>X</fs18ib>
            <fs21ib>X</fs21ib>
            <fs30ia>X</fs30ia>
            <fs30ib>X</fs30ib>
        </lc>
        <p>
            <fs0id>O</fs0id>
            <fs0if>O</fs0if>
            <fs16i>X</fs16i>
            <fs18i>X</fs18i>
            <fs30ia>X</fs30ia>
            <fs30ib>O</fs30ib>
        </p>
        <l>
            <fs0id>X</fs0id>
            <fs0if>X</fs0if>
            <fs16i>X</fs16i>
            <fs18i>X</fs18i>
            <fs30ia>X</fs30ia>
            <fs30ib>O</fs30ib>
        </l>
        <w>
            <fs0id>X</fs0id>
            <fs0if>X</fs0if>
            <fs16i>X</fs16i>
            <fs18i>X</fs18i>
            <fs30ia>O</fs30ia>
            <fs30ib>O</fs30ib>
        </w>
        <pw>
            <d>X</d>
            <h>X</h>
            <a>O</a>
        </pw>
        <is>
            <m>
                <fs30isa>O</fs30isa>
                <fs30isb>O</fs30isb>
            </m>
            <t>
                <fs30isa>O</fs30isa>
                <fs30isb>O</fs30isb>
            </t>
            <w>
                <fs30isa>O</fs30isa>
                <fs30isb>O</fs30isb>
            </w>
        </is>
    </support>



    <reference>
        <item>
            <name>cnc_stopophis</name>
            <file>History/cnc_stopophis.htm</file>
        </item>
        <item>
            <name>cnc_startophis</name>
            <file>History/cnc_startophis.htm</file>
        </item>
        <item>
            <name>cnc_rdophisno</name>
            <file>History/cnc_rdophisno.htm</file>
        </item>
        <item>
            <name>cnc_clearophis</name>
            <file>History/cnc_clearophis.htm</file>
        </item>
    </reference>



    <example>
    </example>



  </func>
</root>
